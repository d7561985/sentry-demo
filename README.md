# Sentry POC - iGaming Platform

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã iGaming –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã.

## üöÄ –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Sentry

1. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç –≤ Sentry** (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç):
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://sentry.io
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –∏–ª–∏ –≤–æ–π–¥–∏—Ç–µ

2. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã –≤ Sentry**:
   - –í Sentry Dashboard –Ω–∞–∂–º–∏—Ç–µ "Create Project"
   - –°–æ–∑–¥–∞–π—Ç–µ 7 –ø—Ä–æ–µ–∫—Ç–æ–≤ (–ø–æ –æ–¥–Ω–æ–º—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞):
     - `igaming-frontend` (Platform: Browser/JavaScript)
     - `igaming-gateway` (Platform: Go)
     - `igaming-user` (Platform: Go)
     - `igaming-game` (Platform: Python)
     - `igaming-payment` (Platform: Node.js)
     - `igaming-analytics` (Platform: Python)
     - `igaming-wager` (Platform: PHP)

3. **–ü–æ–ª—É—á–∏—Ç–µ DSN –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞**:
   - –û—Ç–∫—Ä–æ–π—Ç–µ –∫–∞–∂–¥—ã–π –ø—Ä–æ–µ–∫—Ç
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Client Keys (DSN)
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ DSN (—Ñ–æ—Ä–º–∞—Ç: `https://xxxxx@o123456.ingest.sentry.io/1234567`)

4. **–°–æ–∑–¥–∞–π—Ç–µ Auth Token –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ Source Maps** (—Ç–æ–ª—å–∫–æ –¥–ª—è Frontend):
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ https://sentry.io/settings/account/api/auth-tokens/
   - –ù–∞–∂–º–∏—Ç–µ "Create New Token"
   - –ù–∞–∑–æ–≤–∏—Ç–µ —Ç–æ–∫–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Source Maps Upload")
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—Å–µ —Ç—Ä–∏!):
     - `org:read` - –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
     - `project:read` - –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø—Ä–æ–µ–∫—Ç–µ
     - `project:write` - –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ source maps
     - `project:releases` - –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ .env —Ñ–∞–π–ª–µ

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ**:
   
   **–û—Å–Ω–æ–≤–Ω–æ–π .env —Ñ–∞–π–ª (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)**:
   ```bash
   cp .env.example .env
   ```
   
   –û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –∑–∞–º–µ–Ω–∏—Ç–µ –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä—ã –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ DSN:
   ```
   SENTRY_FRONTEND_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234567
   SENTRY_GATEWAY_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234568
   SENTRY_USER_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234569
   SENTRY_GAME_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234570
   SENTRY_PAYMENT_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234571
   SENTRY_ANALYTICS_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234572
   SENTRY_WAGER_DSN=https://YOUR_KEY@o123456.ingest.sentry.io/1234573
   ```
   
   **Frontend .env —Ñ–∞–π–ª (–¥–ª—è source maps)**:
   ```bash
   cd services/frontend
   cp .env.example .env
   ```
   
   –û—Ç–∫—Ä–æ–π—Ç–µ `services/frontend/.env` –∏ –¥–æ–±–∞–≤—å—Ç–µ:
   ```
   SENTRY_ORG=your-org-slug
   SENTRY_PROJECT=your-project-slug
   SENTRY_AUTH_TOKEN=your-auth-token
   ```
   
   **Wager Service .env —Ñ–∞–π–ª**:
   ```bash
   cd services/wager-service
   cp .env.example .env
   ```
   
   –û—Ç–∫—Ä–æ–π—Ç–µ `services/wager-service/.env` –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - `APP_SECRET` - —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á –¥–ª—è production
   - `SENTRY_DSN` - —É–∫–∞–∂–∏—Ç–µ DSN –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ igaming-wager
   - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
   
   **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**:
   ```bash
   ./check-env.sh
   ```

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤

‚ö†Ô∏è **–í–∞–∂–Ω–æ**: –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–ª–µ–¥—É—é—â–∏–µ –ø–æ—Ä—Ç—ã —Å–≤–æ–±–æ–¥–Ω—ã:
- **27017** - MongoDB
- **6379** - Redis  
- **5672, 15672** - RabbitMQ
- **8080-8086** - –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- **4200** - Frontend

–ï—Å–ª–∏ –ø–æ—Ä—Ç—ã –∑–∞–Ω—è—Ç—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–Ω—è—Ç—ã–µ –ø–æ—Ä—Ç—ã
docker ps --format "table {{.Names}}\t{{.Ports}}" | grep -E "27017|6379|5672|8080"

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker stop <container-name>
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤

#### Production Mode (—Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –∏ –∑–∞–≥—Ä—É–∑–∫–æ–π source maps)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ production —Ä–µ–∂–∏–º–µ
# Source maps –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Sentry
./start-prod.sh

# –ò–ª–∏ –±–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ source maps
./start.sh
```

#### Development Mode (—Å –æ—Ç–ª–∞–¥–∫–æ–π, –±–µ–∑ –∑–∞–≥—Ä—É–∑–∫–∏ source maps)
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ dev —Ä–µ–∂–∏–º–µ —Å hot reload
./start-dev.sh

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é
docker-compose -f docker-compose.yml -f docker-compose.dev.yml up -d
```

**–†–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏**:
- **Production**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–±–æ—Ä–∫–∞, source maps —Å debug-ids –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Sentry
- **Development**: Hot reload, –ø–æ–ª–Ω–∞—è –æ—Ç–ª–∞–¥–∫–∞, debug –ª–æ–≥–∏ –≤–∫–ª—é—á–µ–Ω—ã, source maps –ù–ï –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### üè∑Ô∏è –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–µ–ª–∏–∑—ã

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- –í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `.version`
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ `./start-prod.sh` –≤–µ—Ä—Å–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è
- –í–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
  - –ú–∞—Ä–∫–∏—Ä–æ–≤–∫–∏ –±–∏–ª–¥–æ–≤ –≤ environment —Ñ–∞–π–ª–∞—Ö
  - –°–æ–∑–¥–∞–Ω–∏—è —Ä–µ–ª–∏–∑–æ–≤ –≤ Sentry
  - –ê—Å—Å–æ—Ü–∏–∞—Ü–∏–∏ source maps —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ä–µ–ª–∏–∑–æ–º
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Ä–µ–≥—Ä–µ—Å—Å–∏–π –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏

**Debug IDs –∏ Source Maps**:
- Debug IDs –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∂–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞
- Source maps –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ (–≥–∞—Ä–∞–Ω—Ç–∏—è —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è)
- –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω –≤ `./start-prod.sh`
- Debug IDs –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç 100% —Ç–æ—á–Ω–æ—Å—Ç—å –º–∞–ø–ø–∏–Ω–≥–∞ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

**Sentry —Ä–µ–ª–∏–∑—ã**:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –ø—Ä–∏ production —Å–±–æ—Ä–∫–µ
- Source maps –ø—Ä–∏–≤—è–∑—ã–≤–∞—é—Ç—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —Ä–µ–ª–∏–∑—É –∏ Debug IDs
- –í Sentry Dashboard –º–æ–∂–Ω–æ –≤–∏–¥–µ—Ç—å:
  - –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ –Ω–æ–≤–æ–º —Ä–µ–ª–∏–∑–µ
  - –¢–æ—á–Ω—ã–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å –Ω–æ–º–µ—Ä–∞–º–∏ —Å—Ç—Ä–æ–∫
  - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —Ä–µ–ª–∏–∑–∞–º–∏

–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (–æ–∫–æ–ª–æ 30 —Å–µ–∫—É–Ω–¥).

## üìä Scenario 1: Distributed Tracing Demo

### –¶–µ–ª—å –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
–ü–æ–∫–∞–∑–∞—Ç—å –∫–∞–∫ Sentry –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —á–µ—Ä–µ–∑ –≤—Å—é —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –≤—ã—è–≤–ª—è–µ—Ç —É–∑–∫–∏–µ –º–µ—Å—Ç–∞ –∏ –ø–æ–º–æ–≥–∞–µ—Ç –±—ã—Å—Ç—Ä–æ –Ω–∞—Ö–æ–¥–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã.

### –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

#### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–º–æ
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: http://localhost:4200
2. –í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–ª–æ—Ç-–º–∞—à–∏–Ω—ã —Å –±–∞–ª–∞–Ω—Å–æ–º $1000

#### 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–∏–Ω–æ–≤
1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **SPIN ($10)** 5-10 —Ä–∞–∑
2. –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Å–ø–∏–Ω—ã –±—É–¥—É—Ç –∑–∞–∫–∞–Ω—á–∏–≤–∞—Ç—å—Å—è –æ—à–∏–±–∫–æ–π (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ - 10% –æ—à–∏–±–æ–∫ –≤—Å—Ç—Ä–æ–µ–Ω–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ)

#### 3. –û—Ç–∫—Ä–æ–π—Ç–µ Sentry Dashboard
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ https://sentry.io
2. –û—Ç–∫—Ä–æ–π—Ç–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ –ø—Ä–æ–µ–∫—Ç `igaming-frontend`

#### 4. –ò–∑—É—á–∏—Ç–µ Performance —Ä–∞–∑–¥–µ–ª
1. –í –ª–µ–≤–æ–º –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ **Performance**
2. –ù–∞–π–¥–∏—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é `slot-machine-spin`
3. –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –Ω–µ—ë –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π

### üîç –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—Ç—å

#### A. –ü–æ–ª–Ω—ã–π Distributed Trace
**–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å**: Performance ‚Üí Transaction Details ‚Üí Trace View

**–ß—Ç–æ —Ä–∞—Å—Å–∫–∞–∑–∞—Ç—å**:
- "–í–∏–¥–∏–º –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ 5 –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤"
- "–ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ–π span –≤ –æ–±—â–∏–π trace"
- "–ú–æ–∂–µ–º —Ç–æ—á–Ω–æ –≤–∏–¥–µ—Ç—å, –≥–¥–µ —Ç—Ä–∞—Ç–∏—Ç—Å—è –≤—Ä–µ–º—è"

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- –û–±—â–µ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~3-6 —Å–µ–∫—É–Ω–¥
- –û—Å–Ω–æ–≤–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞: Payment Service (2-5 —Å–µ–∫)

#### B. –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

**1. –ú–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≤ User Service**
- **–ì–¥–µ**: Span `db.query` "Find user by ID"
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 500ms+
- **–†–∞—Å—Å–∫–∞–∑–∞—Ç—å**: "–í–∏–¥–∏–º –º–µ–¥–ª–µ–Ω–Ω—ã–π –∑–∞–ø—Ä–æ—Å –∫ MongoDB - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–¥–µ–∫—Å. –í —Ä–µ–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —ç—Ç–æ –±—ã–ª–æ –±—ã –∫—Ä–∏—Ç–∏—á–Ω–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ"

**2. CPU Spike –≤ Game Engine**
- **–ì–¥–µ**: Span `game.rng` "Calculate slot result"
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –í–∞—Ä—å–∏—Ä—É–µ—Ç—Å—è
- **–†–∞—Å—Å–∫–∞–∑–∞—Ç—å**: "–ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–∞—Å—á–µ—Ç–∞ RNG —Å–æ–∑–¥–∞–µ—Ç –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU. Sentry –ø–æ–º–æ–≥–∞–µ—Ç –≤—ã—è–≤–∏—Ç—å —Ç–∞–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã"

**3. –ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤–Ω–µ—à–Ω–∏–π API –≤ Payment Service**
- **–ì–¥–µ**: Span `http.client` "External payment provider API"
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 2-5 —Å–µ–∫—É–Ω–¥
- **–†–∞—Å—Å–∫–∞–∑–∞—Ç—å**: "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º - —Å–∞–º–æ–µ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ. –ù—É–∂–Ω–æ –ª–∏–±–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å, –ª–∏–±–æ —Å–¥–µ–ª–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π"

#### C. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

**–ï—Å–ª–∏ –ø–æ–ø–∞–ª–∞—Å—å –æ—à–∏–±–∫–∞ –ø–ª–∞—Ç–µ–∂–∞**:
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **Issues** –≤ Sentry
2. –ù–∞–π–¥–∏—Ç–µ "Payment provider timeout"
3. **–ü–æ–∫–∞–∂–∏—Ç–µ**:
   - Stack trace —Å —Ç–æ—á–Ω—ã–º –º–µ—Å—Ç–æ–º –æ—à–∏–±–∫–∏
   - User context (ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
   - –°–≤—è–∑—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º trace
   - –ß–∞—Å—Ç–æ—Ç—É –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å ~10%)

#### D. Custom –º–µ—Ç—Ä–∏–∫–∏

**–ì–¥–µ —Å–º–æ—Ç—Ä–µ—Ç—å**: –í –¥–µ—Ç–∞–ª—è—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, —Å–µ–∫—Ü–∏—è Measurements

**–ü–æ–∫–∞–∑–∞—Ç—å**:
- `game.bet_amount` - —Ä–∞–∑–º–µ—Ä —Å—Ç–∞–≤–∫–∏
- `game.payout` - –≤—ã–∏–≥—Ä—ã—à (–µ—Å–ª–∏ –±—ã–ª)
- `payment.processing_time` - –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–ª–∞—Ç–µ–∂–∞

**–†–∞—Å—Å–∫–∞–∑–∞—Ç—å**: "–ú–æ–∂–µ–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏ –ø—Ä—è–º–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏"

### üí° –ö–ª—é—á–µ–≤—ã–µ –≤—ã–≤–æ–¥—ã –¥–ª—è –¥–µ–º–æ

1. **MTTR (Mean Time To Resolution)**:
   - "–ë–µ–∑ Sentry: –ø–æ–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º—ã –≤ 5 —Å–µ—Ä–≤–∏—Å–∞—Ö –∑–∞–Ω—è–ª –±—ã —á–∞—Å—ã"
   - "–° Sentry: –≤–∏–¥–∏–º –ø—Ä–æ–±–ª–µ–º—É –∑–∞ —Å–µ–∫—É–Ω–¥—ã"

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
   - "–°—Ä–∞–∑—É –≤–∏–¥–Ω—ã –≤—Å–µ bottlenecks"
   - "–ú–æ–∂–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏"

3. **–ë–∏–∑–Ω–µ—Å-impact**:
   - "10% –æ—à–∏–±–æ–∫ –ø–ª–∞—Ç–µ–∂–µ–π = –ø—Ä—è–º–∞—è –ø–æ—Ç–µ—Ä—è revenue"
   - "–ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ = –ø–æ—Ç–µ—Ä—è –∏–≥—Ä–æ–∫–æ–≤"

### üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–º–æ

#### N+1 Query Problem (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
–ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–æ–∫–∞–∑–∞—Ç—å N+1 –ø—Ä–æ–±–ª–µ–º—É:
1. –í –±—Ä–∞—É–∑–µ—Ä–µ –¥–æ–±–∞–≤—å—Ç–µ –∫ URL: `?include_history=true`
2. –°–¥–µ–ª–∞–π—Ç–µ —Å–ø–∏–Ω
3. –í Sentry —É–≤–∏–¥–∏—Ç–µ –º–Ω–æ–∂–µ—Å—Ç–≤–æ span'–æ–≤ `db.query.game`
4. –û–±—ä—è—Å–Ω–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É –Ω–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

#### Panic –≤ Go —Å–µ—Ä–≤–∏—Å–µ
–î–ª—è –¥–µ–º–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–∞–Ω–∏–∫:
```bash
curl http://localhost:8080/api/v1/debug/panic/panic-test
```
–ü–æ–∫–∞–∂–µ—Ç –∫–∞–∫ Sentry –ª–æ–≤–∏—Ç –ø–∞–Ω–∏–∫—É –≤ Go.

### üé• Session Replay (–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è!)

#### –ß—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
1. **–ü—Ä–∏ –ª—é–±–æ–π –æ—à–∏–±–∫–µ** –≤ Sentry —Ç–µ–ø–µ—Ä—å –¥–æ—Å—Ç—É–ø–µ–Ω Session Replay
2. –í –¥–µ—Ç–∞–ª—è—Ö –æ—à–∏–±–∫–∏ –Ω–∞–π–¥–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **Replay**
3. –ü–æ–∫–∞–∂–∏—Ç–µ:
   - –ü–æ–ª–Ω—É—é –∑–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–æ –æ—à–∏–±–∫–∏
   - –ö–ª–∏–∫–∏, –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞, –Ω–∞–≤–∏–≥–∞—Ü–∏—é
   - –°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å —Ç–∞–π–º–∏–Ω–≥–∞–º–∏
   - Console logs –∏ –æ—à–∏–±–∫–∏
   - DOM –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã**: –í–∏–¥–∏—Ç–µ —Ç–æ—á–Ω–æ, —á—Ç–æ –¥–µ–ª–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç –æ—à–∏–±–∫–∏**: –ü–æ–Ω–∏–º–∞–µ—Ç–µ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–∏—à–µ–ª –∫ –æ—à–∏–±–∫–µ
- **–û—Ç–ª–∞–¥–∫–∞ UX**: –í–∏–¥–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
- **Privacy-friendly**: –ú–æ–∂–Ω–æ –º–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### –î–µ–º–æ Session Replay
1. –û—Ç–∫—Ä–æ–π—Ç–µ Debug Panel
2. –°–¥–µ–ª–∞–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ø–∏–Ω–æ–≤
3. –í—ã–∑–æ–≤–∏—Ç–µ –ª—é–±—É—é –æ—à–∏–±–∫—É —á–µ—Ä–µ–∑ Debug Panel
4. –í Sentry –æ—Ç–∫—Ä–æ–π—Ç–µ —ç—Ç—É –æ—à–∏–±–∫—É ‚Üí –≤–∫–ª–∞–¥–∫–∞ Replay
5. –ü–æ–∫–∞–∂–∏—Ç–µ –≤–∏–¥–µ–æ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## üöÄ Scenario 3: Performance Monitoring

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Sentry –ø–æ –≤—ã—è–≤–ª–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- **N+1 Query Problem** –≤ User Service
- **CPU Spike** —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –ø—Ä–æ—Å—Ç—ã—Ö —á–∏—Å–µ–ª –≤ Game Engine  
- **Slow MongoDB Aggregation** –≤ Analytics Service
- **External API Latency** –≤ Payment Service

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç:
1. –û—Ç–∫—Ä–æ–π—Ç–µ Debug Panel –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
2. –ù–∞–π–¥–∏—Ç–µ —Å–µ–∫—Ü–∏—é "Performance Issues"
3. –ù–∞–∂–∏–º–∞–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º
4. –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ Sentry Performance

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [docs/scenario-3-performance-demo.md](docs/scenario-3-performance-demo.md)

## üÜï –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –≤ POC

### Wager Service (PHP/Symfony)
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: PHP 8.1+, Symfony 5.4 LTS, MongoDB —Å Doctrine ODM
- **Sentry –¥–µ–º–æ**: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ aggregations, –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–æ–Ω—É—Å–æ–≤, –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏
- **–ü–æ—Ä—Ç**: 8086 (Swagger UI: http://localhost:8086/api/doc)

### –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –î–µ—Ç–∞–ª—å–Ω—ã–µ crash –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Panic recovery –≤ Go —Å–µ—Ä–≤–∏—Å–∞—Ö
- Structured logging —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

### Debug –ø–∞–Ω–µ–ª—å –≤ Frontend
- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –¥–µ–º–æ-—Å—Ü–µ–Ω–∞—Ä–∏—è–º
- –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—à–∏–±–æ–∫
- Performance –ø—Ä–æ–±–ª–µ–º—ã –ø–æ –∫–Ω–æ–ø–∫–µ

## üì® RabbitMQ Analytics Integration

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è distributed tracing —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–æ–±—â–µ–Ω–∏–π.

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- **Publishers**: Game Engine –∏ Payment Service –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–±—ã—Ç–∏—è
- **Message Queue**: RabbitMQ —Å exchange "gaming"
- **Consumer**: Analytics Service –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞**: –ü–æ–ª–Ω—ã–π trace –æ—Ç HTTP –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ MQ –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ Trace propagation —á–µ—Ä–µ–∑ RabbitMQ
- ‚úÖ Real-time analytics —Å –ø—Ä–µ–¥–∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π
- ‚úÖ Resilience: —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –µ—Å–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö

### –î–æ—Å—Ç—É–ø –∫ RabbitMQ Management:
- URL: http://localhost:15672
- Login: admin / password

**–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è**: [docs/rabbitmq-analytics-demo.md](docs/rabbitmq-analytics-demo.md)

## üõ† Troubleshooting

**–°–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è**:
```bash
docker-compose logs -f [service-name]
```

**–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Sentry**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ DSN –≤ `.env`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ 6 –ø—Ä–æ–µ–∫—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω—ã
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `tracesSampleRate: 1.0` –≤ –∫–æ–¥–µ

**–ù–µ–ø–æ–ª–Ω—ã–µ traces**:
- –ü–æ–¥–æ–∂–¥–∏—Ç–µ 1-2 –º–∏–Ω—É—Ç—ã –ø–æ—Å–ª–µ —Å–ø–∏–Ω–∞
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ Sentry
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã: `docker-compose ps`

## üè≠ Production Recommendations / –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### Source Maps Configuration

**–ß—Ç–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ**:
- ‚úÖ Source maps –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ production —Å–±–æ—Ä–∫–µ
- ‚úÖ Release tracking –¥–ª—è —Å–≤—è–∑–∏ –æ—à–∏–±–æ–∫ —Å –≤–µ—Ä—Å–∏—è–º–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è Sentry SDK v7

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞**:
1. –ó–∞–≥—Ä—É–∂–∞—Ç—å source maps –≤ Sentry –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ
2. –£–¥–∞–ª—è—Ç—å source maps —Å –ø—É–±–ª–∏—á–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Sentry CLI –∏–ª–∏ webpack plugin –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

**–î–µ—Ç–∞–ª–∏**: –°–º. [services/frontend/SENTRY_SOURCEMAPS.md](services/frontend/SENTRY_SOURCEMAPS.md)

### Performance Considerations / –í–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### Frontend (Angular)
- **Source Maps**: 
  - –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å–±–æ—Ä–∫—É: +10-20% –≤—Ä–µ–º–µ–Ω–∏
  - –í–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–∑–º–µ—Ä: 0% (–æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã)
  - Runtime –≤–ª–∏—è–Ω–∏–µ: 0% (–∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å DevTools)
- **Sentry SDK**:
  - –†–∞–∑–º–µ—Ä: ~70KB gzipped
  - CPU: –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ (< 1%)
  - –°–µ—Ç—å: ~1KB –Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

#### Backend Services
- **Go Services**: 
  - CPU overhead: < 0.5%
  - Memory: ~10MB –Ω–∞ —Å–µ—Ä–≤–∏—Å
  - Latency: < 1ms –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **Python/Node.js**:
  - CPU overhead: < 1%
  - Memory: ~20-30MB
  - Latency: < 2ms –Ω–∞ –∑–∞–ø—Ä–æ—Å

### Security Recommendations / –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **Source Maps**:
   ```json
   // –î–ª—è production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ hidden source maps
   "sourceMap": {
     "scripts": true,
     "hidden": true,
     "vendor": false
   }
   ```

2. **Sensitive Data**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `beforeSend` –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
   - –ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ –ø–∞—Ä–æ–ª–∏, —Ç–æ–∫–µ–Ω—ã, –ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ Data Scrubbing –≤ Sentry

3. **DSN Protection**:
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ DSN –¥–ª—è dev/prod
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –¥–æ–º–µ–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
   - –í–∫–ª—é—á–∏—Ç–µ rate limiting

### Optimization Tips / –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

1. **Sampling –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫**:
   ```javascript
   // –í–º–µ—Å—Ç–æ 100% —Ç—Ä–µ–π—Å–∏–Ω–≥–∞
   tracesSampleRate: 0.1, // 10% –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ
   
   // –ò–ª–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π sampling
   tracesSampler: (samplingContext) => {
     // –í–∞–∂–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - 100%
     if (samplingContext.transactionContext.name === 'payment') {
       return 1.0;
     }
     // –û—Å—Ç–∞–ª—å–Ω—ã–µ - 10%
     return 0.1;
   }
   ```

2. **–ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** (–æ—Å—Ç–æ—Ä–æ–∂–Ω–æ –≤ –ø—Ä–æ–¥–µ):
   ```javascript
   profilesSampleRate: 0.01, // 1% –¥–ª—è production
   ```

3. **–£–º–µ–Ω—å—à–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö**:
   - –û—Ç–∫–ª—é—á–∏—Ç–µ debug mode
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `ignoreErrors` –¥–ª—è –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –æ—à–∏–±–æ–∫
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ `maxBreadcrumbs` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 100)

### Monitoring Best Practices

1. **Alerts Configuration**:
   - Error rate > 1% ‚Üí Critical
   - P95 latency > 1s ‚Üí Warning  
   - Failed payments > 5% ‚Üí Critical

2. **Dashboards**:
   - –°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–∞—à–±–æ—Ä–¥—ã –¥–ª—è:
     - Business metrics (RTP, –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏)
     - Technical metrics (latency, errors)
     - Payment success rate

3. **Release Process**:
   - –í—Å–µ–≥–¥–∞ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ release –≤–µ—Ä—Å–∏—é
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ semantic versioning
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ release health tracking

### Cost Management / –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é

- **Transactions**: –û—Å–Ω–æ–≤–Ω–æ–π –¥—Ä–∞–π–≤–µ—Ä —Å—Ç–æ–∏–º–æ—Å—Ç–∏
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**:
  - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ sampling –≤ production
  - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è health checks
  - –†–µ–≥—É–ª—è—Ä–Ω–æ —á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
  - –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ usage –≤ Sentry

### Example Production Config

```javascript
// Frontend (main.ts)
Sentry.init({
  dsn: process.env.SENTRY_DSN,
  release: process.env.RELEASE_VERSION,
  environment: 'production',
  tracesSampleRate: 0.1,
  profilesSampleRate: 0.01,
  // Session Replay –¥–ª—è production
  replaysSessionSampleRate: 0.01, // 1% –æ–±—ã—á–Ω—ã—Ö —Å–µ—Å—Å–∏–π
  replaysOnErrorSampleRate: 1.0,   // 100% —Å–µ—Å—Å–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
  integrations: [
    new Sentry.Replay({
      // Privacy settings –¥–ª—è production
      maskAllText: true,     // –ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç
      maskAllInputs: true,   // –ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ input
      blockAllMedia: true,   // –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å media
      // –ú–∞—Å–∫–∏—Ä–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã
      mask: ['.sensitive', '.credit-card', '.password'],
      // –ò—Å–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è –º–∞—Å–∫–∏—Ä–æ–≤–∫–∏
      unmask: ['.game-result', '.balance'],
      // –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Å–µ—Ç–µ–≤—ã–µ –¥–µ—Ç–∞–ª–∏
      networkDetailAllowUrls: [window.location.origin],
      networkRequestHeaders: ['X-Request-ID'],
      networkResponseHeaders: ['X-Response-ID'],
    }),
  ],
  ignoreErrors: [
    'ResizeObserver loop limit exceeded',
    'Non-Error promise rejection captured'
  ],
  beforeSend(event, hint) {
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è sensitive –¥–∞–Ω–Ω—ã—Ö
    if (event.request?.cookies) {
      delete event.request.cookies;
    }
    return event;
  }
});
```

### Session Replay Privacy –ù–∞—Å—Ç—Ä–æ–π–∫–∏

–î–ª—è iGaming –≤–∞–∂–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å:

```javascript
// –ú–∞—Å–∫–∏—Ä–æ–≤–∫–∞ –¥–ª—è production
const replayConfig = {
  // –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
  maskAllText: true,        // –°–∫—Ä—ã—Ç—å –≤–µ—Å—å —Ç–µ–∫—Å—Ç
  maskAllInputs: true,      // –°–∫—Ä—ã—Ç—å –≤—Å–µ –≤–≤–æ–¥—ã
  blockAllMedia: true,      // –ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –º–µ–¥–∏–∞
  
  // –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –¥–ª—è iGaming
  mask: [
    '[data-sensitive]',     // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
    '.user-balance',        // –ë–∞–ª–∞–Ω—Å (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–∫—Ä—ã—Ç—å)
    '.payment-info',        // –ü–ª–∞—Ç–µ–∂–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
    'input[type="password"]', // –ü–∞—Ä–æ–ª–∏
  ],
  
  // –ß—Ç–æ –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å
  unmask: [
    '.game-board',          // –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ
    '.spin-result',         // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–≥—Ä—ã
    '.error-message',       // –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
  ],
  
  // Sampling
  sessionSampleRate: 0.01,  // 1% –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π
  errorSampleRate: 1.0,     // 100% —Å–µ—Å—Å–∏–π —Å –æ—à–∏–±–∫–∞–º–∏
};
```


## üìã Environment Variables Reference

### Root .env —Ñ–∞–π–ª

| Variable | Description | Example |
|----------|-------------|---------|
| `SENTRY_FRONTEND_DSN` | DSN –¥–ª—è Frontend –ø—Ä–æ–µ–∫—Ç–∞ | `https://xxx@o123456.ingest.sentry.io/1234567` |
| `SENTRY_GATEWAY_DSN` | DSN –¥–ª—è API Gateway | `https://xxx@o123456.ingest.sentry.io/1234568` |
| `SENTRY_USER_DSN` | DSN –¥–ª—è User Service | `https://xxx@o123456.ingest.sentry.io/1234569` |
| `SENTRY_GAME_DSN` | DSN –¥–ª—è Game Engine | `https://xxx@o123456.ingest.sentry.io/1234570` |
| `SENTRY_PAYMENT_DSN` | DSN –¥–ª—è Payment Service | `https://xxx@o123456.ingest.sentry.io/1234571` |
| `SENTRY_ANALYTICS_DSN` | DSN –¥–ª—è Analytics Service | `https://xxx@o123456.ingest.sentry.io/1234572` |
| `SENTRY_WAGER_DSN` | DSN –¥–ª—è Wager Service | `https://xxx@o123456.ingest.sentry.io/1234573` |
| `SENTRY_TRACES_SAMPLE_RATE` | –ü—Ä–æ—Ü–µ–Ω—Ç —Ç—Ä–µ–π—Å–æ–≤ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ | `1.0` (100% –¥–ª—è dev, `0.1` –¥–ª—è prod) |
| `SENTRY_AUTH_TOKEN` | –¢–æ–∫–µ–Ω –¥–ª—è Sentry CLI –æ–ø–µ—Ä–∞—Ü–∏–π | –ü–æ–ª—É—á–∏—Ç—å –Ω–∞ sentry.io |
| `API_URL` | URL API Gateway | `http://localhost:8080` |
| `APP_VERSION` | –í–µ—Ä—Å–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è | `1.0.0` |

### Frontend .env —Ñ–∞–π–ª

| Variable | Description | Example |
|----------|-------------|---------|
| `SENTRY_ORG` | Slug –≤–∞—à–µ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –≤ Sentry | `my-company` |
| `SENTRY_PROJECT` | Slug –ø—Ä–æ–µ–∫—Ç–∞ –≤ Sentry | `igaming-frontend` |
| `SENTRY_AUTH_TOKEN` | –¢–æ–∫–µ–Ω –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ source maps | –°–º. –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤—ã—à–µ |

### Wager Service .env —Ñ–∞–π–ª

| Variable | Description | Example |
|----------|-------------|---------|
| `APP_ENV` | –û–∫—Ä—É–∂–µ–Ω–∏–µ Symfony | `dev`, `test`, `prod` |
| `APP_SECRET` | –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á Symfony | –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π –¥–ª—è prod |
| `MONGODB_URL` | –°—Ç—Ä–æ–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ MongoDB | `mongodb://admin:password@mongodb:27017/sentry_poc?authSource=admin` |
| `MONGODB_DB` | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | `sentry_poc` |
| `SENTRY_DSN` | DSN –¥–ª—è Sentry | –í–∑—è—Ç—å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ igaming-wager |
| `USER_SERVICE_URL` | URL User Service | `http://user-service:8081` |
| `PAYMENT_SERVICE_URL` | URL Payment Service | `http://payment-service:8083` |
| `APP_VERSION` | –í–µ—Ä—Å–∏—è —Å–µ—Ä–≤–∏—Å–∞ | `1.0.0` |

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤

**Symfony APP_SECRET**:
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: PHP
php -r "echo bin2hex(random_bytes(16));"

# –í–∞—Ä–∏–∞–Ω—Ç 2: OpenSSL
openssl rand -hex 16

# –í–∞—Ä–∏–∞–Ω—Ç 3: Symfony console (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
php bin/console secrets:generate-keys
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—Å–µ—Ö .env —Ñ–∞–π–ª–æ–≤, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
./check-env.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Sentry DSN (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤—Å–µ 7 –ø—Ä–æ–µ–∫—Ç–æ–≤)
grep SENTRY_.*_DSN .env | wc -l  # –î–æ–ª–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å 7

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ DSN –Ω–µ –ø—É—Å—Ç—ã–µ
grep SENTRY_.*_DSN .env | grep -v "="$  # –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤—ã–≤–æ–¥–∞
```

# ToDo

* –º–Ω–µ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è —á—Ç–æ –∫–∞–∂–¥—ã–π –∫–ª–∏–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ —Ç—Ä–µ–π—Å—Ç —Å–æ–∑–¥–∞–µ—Ç —ç—Ç–æ –Ω—É–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å!
* –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–Ω–æ–º–∞–ª–∏–∏